<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HAYATÄ° KÄ°MLÄ°K | PRO</title>
    <style>
        :root {
            --bg: #000000;
            --card-bg: #111111;
            --blue: #00f3ff;
            --red: #ff0055;
            --green: #00ff9d;
            --text: #ffffff;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; user-select: none; }

        body {
            margin: 0; padding: 0;
            font-family: 'Courier New', monospace;
            background-color: var(--bg);
            color: var(--text);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- EKRAN YÃ–NETÄ°MÄ° --- */
        .screen {
            width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            display: none; flex-direction: column;
            padding: 15px;
            background: var(--bg);
            overflow-y: auto;
        }
        .active { display: flex; animation: fadeIn 0.3s; }

        /* --- AÃ‡ILIÅ (BOOT) --- */
        #bootScreen { justify-content: center; align-items: center; z-index: 9999; }
        .loader {
            width: 60px; height: 60px;
            border: 4px solid #333;
            border-top: 4px solid var(--blue);
            border-radius: 50%;
            animation: spin 1s infinite linear;
            margin-bottom: 20px;
        }
        
        /* --- KART TASARIMI --- */
        .card {
            background: var(--card-bg);
            border: 1px solid #333;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.1);
        }

        .avatar {
            width: 100px; height: 100px; border-radius: 50%;
            border: 3px solid var(--blue);
            object-fit: cover;
            margin-top: -10px;
            background: #222;
        }

        .tag {
            background: rgba(255,0,85,0.15); color: var(--red);
            padding: 4px 10px; border-radius: 4px;
            font-size: 12px; font-weight: bold;
            border: 1px solid var(--red);
            display: inline-block; margin: 5px;
        }

        /* --- BUTONLAR --- */
        .grid-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        
        .btn {
            background: #222; border: 1px solid #444;
            color: white; padding: 15px; border-radius: 10px;
            font-size: 14px; font-weight: bold; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; gap: 5px;
        }
        .btn:active { background: #333; transform: scale(0.98); }
        .btn-icon { font-size: 24px; margin-bottom: 5px; }

        .sos-btn {
            background: linear-gradient(45deg, #cc0000, #ff0055);
            width: 100%; border: none; padding: 15px;
            border-radius: 50px; color: white; font-size: 20px; font-weight: bold;
            box-shadow: 0 0 20px rgba(255, 0, 85, 0.4);
            animation: pulse 1.5s infinite;
            margin-top: auto;
        }

        /* --- AI CHAT --- */
        .chat-container { flex: 1; overflow-y: auto; padding: 10px; border: 1px solid #333; border-radius: 10px; margin-bottom: 10px; background: #050505; }
        .msg { padding: 10px; border-radius: 8px; margin-bottom: 10px; font-size: 14px; line-height: 1.4; max-width: 90%; }
        .bot { background: rgba(0, 243, 255, 0.1); border-left: 3px solid var(--blue); color: #ddd; align-self: flex-start; }
        .user { background: rgba(0, 255, 157, 0.1); border-right: 3px solid var(--green); color: white; align-self: flex-end; text-align: right; margin-left: auto; }
        .option-btn { background: #222; border: 1px solid var(--blue); color: var(--blue); padding: 10px; margin: 5px 0; width: 100%; text-align: left; border-radius: 5px; }

        /* --- ADMIN PANEL --- */
        .admin-field {
            display: flex; justify-content: space-between;
            padding: 10px; border-bottom: 1px dashed #333;
            font-size: 13px;
        }
        .val { color: var(--green); text-align: right; width: 60%; }
        .editing { border: 1px solid var(--blue); background: #1a1a1a; padding: 5px; }
        .save-btn { background: var(--green); color: black; border: none; padding: 10px; width: 100%; font-weight: bold; margin-top: 10px; }

        /* --- ANÄ°MASYONLAR --- */
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="bootScreen" class="screen active" onclick="forceStart()">
        <div class="loader"></div>
        <div style="color:var(--blue); font-size:12px; letter-spacing:2px; margin-top:10px;">SÄ°STEM BAÅLATILIYOR...</div>
        <div style="color:#555; font-size:10px; margin-top:50px;">(AÃ§Ä±lmazsa ekrana dokunun)</div>
    </div>

    <div id="mainScreen" class="screen">
        <div style="position:absolute; top:10px; right:10px; font-size:24px; opacity:0.5;" onclick="openAdmin()">âš™ï¸</div>
        
        <div class="card">
            <img src="https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=200" class="avatar" id="disp_img">
            <h2 id="disp_name" style="margin:10px 0 5px;">YÃœKLENÄ°YOR...</h2>
            <div id="disp_id" style="color:#666; font-size:12px;">ID: ...</div>
            <div style="margin-top:15px;">
                <span class="tag" id="disp_disease">...</span>
                <span class="tag" style="border-color:var(--blue); color:var(--blue)" id="disp_blood">...</span>
            </div>
        </div>

        <div class="grid-menu">
            <div class="btn" onclick="startAI()">
                <span class="btn-icon">ğŸ¤–</span>
                AI ASÄ°STAN
            </div>
            <div class="btn" onclick="openFamily()">
                <span class="btn-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                AÄ°LE (5 KiÅŸi)
            </div>
            <div class="btn" onclick="showMeds()">
                <span class="btn-icon">ğŸ’Š</span>
                Ä°LAÃ‡LAR
            </div>
            <div class="btn" onclick="sendLocation()">
                <span class="btn-icon">ğŸ“</span>
                KONUM AT
            </div>
        </div>

        <button class="sos-btn" onclick="window.location.href='tel:112'">ğŸ†˜ 112 ACÄ°L</button>
    </div>

    <div id="aiScreen" class="screen">
        <h3 style="text-align:center; color:var(--blue); border-bottom:1px solid #333; padding-bottom:10px; margin-top:0;">AI TRÄ°YAJ</h3>
        <div class="chat-container" id="chatBox"></div>
        <button class="btn" style="width:100%; margin-top:auto;" onclick="goHome()">Ã‡IKIÅ</button>
    </div>

    <div id="familyScreen" class="screen">
        <h3 style="text-align:center; color:var(--green);">YAKINLARI</h3>
        <div id="familyList" style="flex:1;"></div>
        <button class="btn" style="width:100%;" onclick="goHome()">GERÄ° DÃ–N</button>
    </div>

    <div id="adminScreen" class="screen">
        <h3 style="text-align:center; color:var(--red);">YÃ–NETÄ°CÄ° PANELÄ°</h3>
        <p style="font-size:10px; text-align:center; color:#666;">Bilgileri deÄŸiÅŸtirmek iÃ§in Ã¼zerine tÄ±klayÄ±n.</p>
        
        <div id="adminForm" style="flex:1; overflow-y:auto;">
            </div>

        <button class="save-btn" onclick="saveData()">KAYDET VE Ã‡IK</button>
    </div>

    <script>
        /* --- VERÄ°TABANI (TELEFONDA Ã‡ALIÅAN) --- */
        // Ä°lk aÃ§Ä±lÄ±ÅŸta varsayÄ±lan veriler. YÃ¶netici deÄŸiÅŸtirirse hafÄ±zada deÄŸiÅŸir.
        let DB = {
            name: "TALHA YILMAZ",
            id: "TR-8824-X",
            disease: "TÄ°P 1 DÄ°YABET",
            blood: "A Rh+",
            allergy: "PENÄ°SÄ°LÄ°N",
            meds: "Humalog (Yemekte), Lantus (Gece)",
            contacts: [
                { rel: "Anne", tel: "05551112233" },
                { rel: "Baba", tel: "05554445566" },
                { rel: "KardeÅŸ", tel: "05557778899" },
                { rel: "Doktor", tel: "02124440000" },
                { rel: "KomÅŸu", tel: "05550001122" }
            ],
            private: {
                tc: "12345678901",
                note: "Hasta glukagon iÄŸnesine yanÄ±t verir.",
                insurance: "Allianz Sigorta"
            }
        };

        /* --- SÄ°STEM BAÅLATMA --- */
        // Sayfa yÃ¼klenince otomatik Ã§alÄ±ÅŸÄ±r
        window.onload = () => {
            // Veriyi ekrana bas
            renderMain();
            // 1.5 saniye sonra aÃ§Ä±lÄ±ÅŸ ekranÄ±nÄ± kapat
            setTimeout(() => {
                document.getElementById('bootScreen').style.display = 'none';
                document.getElementById('mainScreen').classList.add('active');
            }, 1500);
        };

        // Donarsa tÄ±klayarak aÃ§mak iÃ§in
        function forceStart() {
            document.getElementById('bootScreen').style.display = 'none';
            document.getElementById('mainScreen').classList.add('active');
        }

        /* --- EKRAN YÃ–NETÄ°MÄ° --- */
        function goHome() {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById('mainScreen').style.display = 'flex';
        }

        function renderMain() {
            document.getElementById('disp_name').innerText = DB.name;
            document.getElementById('disp_id').innerText = "ID: " + DB.id;
            document.getElementById('disp_disease').innerText = "âš ï¸ " + DB.disease;
            document.getElementById('disp_blood').innerText = DB.blood;
        }

        /* --- Ä°ÅLEVLER --- */
        function showMeds() {
            alert("Ä°LAÃ‡LAR:\n" + DB.meds + "\n\nALERJÄ°LER:\n" + DB.allergy);
        }

        function sendLocation() {
            alert("Konumunuz (41.0082, 28.9784) belirlendi.\nAileye SMS olarak gÃ¶nderiliyor...");
        }

        /* --- AÄ°LE LÄ°STESÄ° --- */
        function openFamily() {
            let html = "";
            DB.contacts.forEach(c => {
                html += `
                <div class="card" style="display:flex; justify-content:space-between; align-items:center; padding:15px; margin-bottom:10px;">
                    <div style="text-align:left;">
                        <div style="color:var(--blue); font-weight:bold;">${c.rel}</div>
                        <div style="font-size:14px; color:#aaa;">${c.tel}</div>
                    </div>
                    <button style="background:var(--green); border:none; padding:10px; border-radius:5px; font-weight:bold;" onclick="window.location.href='tel:${c.tel}'">ARA</button>
                </div>`;
            });
            document.getElementById('familyList').innerHTML = html;
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById('familyScreen').style.display = 'flex';
        }

        /* --- GELÄ°ÅMÄ°Å YAPAY ZEKA (AI) --- */
        function startAI() {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById('aiScreen').style.display = 'flex';
            document.getElementById('chatBox').innerHTML = "";
            
            aiSpeak(`Merhaba. HastamÄ±z ${DB.name} iÃ§in acil durum analizi yapÄ±yorum. HastanÄ±n ÅŸu anki durumu nedir?`, [
                {txt: "BAYGIN / HAREKETSÄ°Z", val: "baygin"},
                {txt: "NÃ–BET GEÃ‡Ä°RÄ°YOR", val: "nobet"},
                {txt: "ÅEKER / DÄ°YABET KRÄ°ZÄ°", val: "seker"},
                {txt: "GÃ–ÄÃœS AÄRISI (KALP)", val: "kalp"}
            ]);
        }

        function aiSpeak(msg, options) {
            const box = document.getElementById('chatBox');
            // Bot mesajÄ±
            box.innerHTML += `<div class="msg bot">${msg}</div>`;
            
            // SeÃ§enekler
            if(options) {
                options.forEach(opt => {
                    box.innerHTML += `<button class="option-btn" onclick="aiResponse('${opt.val}')">â¤ ${opt.txt}</button>`;
                });
            }
            box.scrollTop = box.scrollHeight;
        }

        function aiResponse(val) {
            // KullanÄ±cÄ± seÃ§imi silinip chat devam etsin diye butonlarÄ± temizleyebiliriz ama basitlik iÃ§in devam ediyoruz.
            const box = document.getElementById('chatBox');
            // KullanÄ±cÄ± mesajÄ± simÃ¼lasyonu
            // box.innerHTML += `<div class="msg user">SeÃ§im: ${val}</div>`;

            if(val === "baygin") {
                aiSpeak("Solunum kontrolÃ¼ yapÄ±n. Nefes alÄ±yor mu?", [
                    {txt: "EVET, ALIYOR", val: "nefes_var"},
                    {txt: "HAYIR, ALMIYOR", val: "nefes_yok"}
                ]);
            } else if (val === "nefes_var") {
                aiSpeak("âœ… Ä°YÄ° HABER. HastayÄ± YAN Ã‡EVÄ°RÄ°N (Koma Pozisyonu). Kusarsa boÄŸulmasÄ±n. BaÅŸÄ±ndan ayrÄ±lmayÄ±n.", null);
            } else if (val === "nefes_yok") {
                aiSpeak("ğŸš¨ KIRMIZI ALARM! Hemen kalp masajÄ±na baÅŸlayÄ±n ve 112'yi hoparlÃ¶re alarak arayÄ±n!", null);
            } 
            
            else if (val === "nobet") {
                aiSpeak("Sakin olun. BaÅŸÄ±nÄ± koruyun. AÄŸzÄ±na bir ÅŸey soktunuz mu?", [
                    {txt: "HAYIR (DOÄRUSU BU)", val: "agiz_bos"},
                    {txt: "EVET (KAÅIK VB.)", val: "agiz_dolu"}
                ]);
            } else if (val === "agiz_bos") {
                aiSpeak("âœ… SÃœPER. Sadece izleyin, nÃ¶bet 5 dakikayÄ± geÃ§erse 112'yi arayÄ±n.", null);
            } else if (val === "agiz_dolu") {
                aiSpeak("âŒ TEHLÄ°KE! Ã‡Ä±karmaya Ã§alÄ±ÅŸÄ±rken diÅŸlerini kÄ±rabilirsiniz. LÃ¼tfen bir daha yapmayÄ±n. HastayÄ± yan Ã§evirin.", null);
            }

            else if (val === "seker") {
                aiSpeak("HastanÄ±n bilinci aÃ§Ä±k mÄ±? Yutkunabiliyor mu?", [
                    {txt: "EVET", val: "seker_acik"},
                    {txt: "HAYIR", val: "seker_kapali"}
                ]);
            } else if (val === "seker_acik") {
                aiSpeak("âœ… HÄ°POGLÄ°SEMÄ°. Hemen meyve suyu veya 3-4 kesme ÅŸeker verin.", null);
            } else if (val === "seker_kapali") {
                aiSpeak("ğŸš¨ KOMA RÄ°SKÄ°. AÄŸÄ±zdan bir ÅŸey vermeyin! Yan Ã§evirin ve 112'yi arayÄ±n. Glukagon iÄŸnesi varsa yapÄ±n.", null);
            }
        }

        /* --- YÃ–NETÄ°CÄ° PANELÄ° (DÃœZENLEME) --- */
        function openAdmin() {
            let pass = prompt("YÃ¶netici Åifresi Girin:");
            if(pass === "01Talha55") {
                renderAdmin();
                document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
                document.getElementById('adminScreen').style.display = 'flex';
            } else {
                alert("HatalÄ± Åifre!");
            }
        }

        function renderAdmin() {
            let form = document.getElementById('adminForm');
            let html = `<div style="color:#aaa; font-size:12px; margin-bottom:10px;">TEMEL BÄ°LGÄ°LER</div>`;
            
            // Temel Bilgiler
            html += createInput("Ad Soyad", "name", DB.name);
            html += createInput("HastalÄ±k", "disease", DB.disease);
            html += createInput("Kan Grubu", "blood", DB.blood);
            html += createInput("Ä°laÃ§lar", "meds", DB.meds);

            html += `<div style="color:#aaa; font-size:12px; margin:20px 0 10px 0;">Ã–ZEL VERÄ°LER (GÄ°ZLÄ°)</div>`;
            html += createInput("TC Kimlik", "tc", DB.private.tc);
            html += createInput("Sigorta", "insurance", DB.private.insurance);
            html += createInput("Doktor Notu", "note", DB.private.note);

            form.innerHTML = html;
        }

        function createInput(label, key, val) {
            return `
            <div class="admin-field">
                <span>${label}:</span>
                <div class="val" contenteditable="true" id="edit_${key}" style="border-bottom:1px solid #444;">${val}</div>
            </div>`;
        }

        function saveData() {
            // Verileri HTML'den geri Ã§ekip DB'ye kaydetme simÃ¼lasyonu
            DB.name = document.getElementById('edit_name').innerText;
            DB.disease = document.getElementById('edit_disease').innerText;
            DB.blood = document.getElementById('edit_blood').innerText;
            DB.meds = document.getElementById('edit_meds').innerText;
            DB.private.tc = document.getElementById('edit_tc').innerText;
            DB.private.note = document.getElementById('edit_note').innerText;
            DB.private.insurance = document.getElementById('edit_insurance').innerText;

            alert("Veriler GÃ¼ncellendi!");
            goHome();
            renderMain(); // Ana ekranÄ± yenile
        }

    </script>
</body>
</html>
